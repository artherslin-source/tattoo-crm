# 業務資料生成器

## 🏢 功能說明

這個工具可以生成符合真實刺青店業務流程的資料，包括：

1. **📞 聯絡記錄** → 客戶初次聯絡
2. **📅 預約記錄** → 人員協助安排預約
3. **💰 訂單記錄** → 服務完成後產生訂單

## 🔄 業務流程邏輯

```
客戶聯絡 → 人員協助 → 安排預約 → 服務完成 → 產生訂單
   ↓         ↓         ↓         ↓         ↓
 Contact → Contact → Appointment → Service → Order
```

### 資料關聯性

- **聯絡記錄** → 包含客戶基本資訊、聯絡方式、需求描述
- **預約記錄** → 關聯到聯絡記錄、分店、刺青師、服務項目
- **訂單記錄** → 關聯到預約記錄、包含金額、付款方式、狀態

## 🚀 使用方式

### 基本使用

```bash
# 生成預設數量的業務資料
npm run business-data

# 生成少量資料（適合測試）
npm run business-data:small

# 生成大量資料（適合展示）
npm run business-data:large
```

### 自訂參數

```bash
# 自訂各類型資料數量
node scripts/run-business-data.js --contacts=100 --appointments=80 --orders=60

# 自訂資料年份
node scripts/run-business-data.js --year=2023

# 查看幫助
node scripts/run-business-data.js --help
```

### 參數說明

| 參數 | 說明 | 預設值 |
|------|------|--------|
| `--contacts=數量` | 聯絡記錄數量 | 50 |
| `--appointments=數量` | 預約記錄數量 | 35 |
| `--orders=數量` | 訂單記錄數量 | 25 |
| `--year=年份` | 資料年份 | 2024 |

## 📊 生成的資料內容

### 聯絡記錄 (Contact)
- 客戶姓名、Email、電話
- 聯絡訊息（真實的刺青需求描述）
- 聯絡來源（網站、電話、現場、推薦）
- 優先級別（低、中、高）
- 分配給的刺青師
- 所屬分店

### 預約記錄 (Appointment)
- 關聯的聯絡記錄
- 預約時間和結束時間
- 服務項目和刺青師
- 預約狀態（待確認、已確認、進行中、已完成、已取消）
- 預約備註

### 訂單記錄 (Order)
- 關聯的預約記錄
- 訂單金額（含折扣計算）
- 付款方式和狀態
- 付款時間
- 訂單狀態

### 分期付款 (Installment)
- 部分訂單會自動生成分期付款記錄
- 包含分期期數、金額、到期日
- 付款狀態追蹤

## 🎯 資料邏輯性

### 時間邏輯
- 聯絡記錄 → 預約記錄 → 訂單記錄的時間順序合理
- 預約時間在聯絡時間之後
- 訂單時間在預約時間之後

### 關聯邏輯
- 每個預約都對應一個聯絡記錄
- 每個訂單都對應一個預約記錄
- 刺青師和分店的匹配關係正確

### 業務邏輯
- 只有已完成的預約才會產生訂單
- 訂單金額基於服務項目價格
- 部分訂單會有折扣
- 分期付款的計算正確

## 📈 統計報告

生成完成後會顯示：

### 總體統計
- 各類型記錄的數量
- 分期付款記錄數量

### 分店業績
- 每個分店的訂單數量和營收
- 便於老闆查看各分店表現

### 刺青師業績
- 每個刺青師的訂單數量和營收
- 便於評估刺青師表現

## ⚠️ 注意事項

1. **資料保護**
   - 此工具會生成新的業務資料
   - 不會影響現有的服務項目、分店、刺青師資料
   - 建議在測試環境使用

2. **資料庫要求**
   - 需要先有分店、刺青師、服務項目的基礎資料
   - 如果缺少基礎資料會報錯

3. **資料量建議**
   - 小量測試：20聯絡、15預約、10訂單
   - 正常展示：50聯絡、35預約、25訂單
   - 大量展示：100聯絡、80預約、60訂單

## 🔧 技術細節

### 檔案結構
```
backend/scripts/
├── generate-business-data.ts  # 主要生成邏輯
├── run-business-data.js       # 執行腳本
└── ...
```

### 依賴套件
- `@faker-js/faker` - 生成假資料
- `@prisma/client` - 資料庫操作
- `bcrypt` - 密碼加密

### 執行環境
- Node.js 環境
- 已配置的 Prisma 資料庫
- 現有的基礎資料（分店、刺青師、服務項目）

## 🎉 使用範例

```bash
# 1. 生成基本業務資料
npm run business-data

# 2. 生成大量資料用於展示
npm run business-data:large

# 3. 自訂參數生成
node scripts/run-business-data.js --contacts=200 --appointments=150 --orders=100 --year=2024

# 4. 查看幫助
node scripts/run-business-data.js --help
```

生成完成後，您可以在管理後台的各個頁面查看生成的資料，這些資料完全符合真實的刺青店業務流程！
