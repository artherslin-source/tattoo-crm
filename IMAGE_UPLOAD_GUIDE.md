# 📸 服務項目圖片上傳指南

## 🎯 設計理念

系統採用**自動檔名管理**機制，讓管理員可以使用任何檔名上傳圖片，無需手動重命名。

## ✨ 主要特點

### 1. **任意檔名上傳**
- ✅ 可以使用任何檔名（中文、英文、數字都可以）
- ✅ 不需要按照特定命名規則
- ✅ 系統會自動處理檔名衝突

### 2. **自動檔名管理**
系統會自動生成唯一的檔名，格式為：
```
service-{timestamp}-{random}.{ext}
```

例如：
- 原始檔名：`紅龍刺青.jpg`
- 系統檔名：`service-1760940123456-a3f9k2.jpg`
- 顯示名稱：`圖片.jpg`（在圖片選擇器中）

### 3. **分類管理**
圖片會按照分類儲存在不同資料夾：
```
uploads/services/
├── arm/      # 手臂相關
├── leg/      # 腿部相關
├── back/     # 背部相關
└── other/    # 其他
```

## 📋 使用流程

### 在服務管理頁面：

1. **點擊「選擇圖片」按鈕**
   - 開啟圖片選擇器對話框

2. **上傳新圖片（如果需要）**
   - 選擇檔案（任何檔名都可以）
   - 選擇分類（arm/leg/back/other）
   - 點擊「上傳」

3. **選擇已有圖片**
   - 瀏覽所有已上傳的圖片
   - 使用分類篩選
   - 使用搜尋功能
   - 點擊圖片即可選擇

4. **完成**
   - 圖片URL會自動填入
   - 顯示預覽縮圖
   - 儲存服務項目

## 🔧 技術細節

### 檔名生成規則
```typescript
// 格式：service-{timestamp}-{random}.{ext}
const timestamp = Date.now();              // 時間戳記
const random = Math.random()               // 隨機字串
  .toString(36).substring(2, 8);
const filename = `service-${timestamp}-${random}${ext}`;
```

### 支援的圖片格式
- JPG / JPEG
- PNG（支援透明背景）
- GIF
- WebP

### 檔案大小限制
- 最大：10MB

## 🎨 優勢分析

### 對比傳統方式

| 項目 | 傳統方式 | 新方式 |
|------|---------|--------|
| **檔名要求** | 必須按規則命名 | 任意檔名 |
| **中文檔名** | 可能有問題 | 完全支援 |
| **檔名衝突** | 需要手動處理 | 自動處理 |
| **管理難度** | 高 | 低 |
| **錯誤率** | 高 | 低 |

### 實際範例

**情境：上傳三張手臂刺青圖片**

**傳統方式：**
```
❌ 需要重命名：
   我的刺青作品1.jpg → full-arm-sleeve.jpg
   龍圖案.jpg → upper-arm-sleeve.jpg
   IMG_20250120.jpg → forearm-sleeve.jpg
```

**新方式：**
```
✅ 直接上傳：
   我的刺青作品1.jpg → 系統自動處理
   龍圖案.jpg → 系統自動處理
   IMG_20250120.jpg → 系統自動處理
```

## 🔐 安全性

### 檔名唯一性保證
- 時間戳記（毫秒級）
- 隨機字串（6位）
- 組合確保唯一性

### 檔案驗證
- 副檔名檢查
- MIME類型驗證
- 檔案大小限制

## 💡 最佳實踐

### 建議

1. **圖片命名**
   - 使用有意義的檔名（方便自己記憶）
   - 系統會自動處理，無需擔心格式

2. **分類選擇**
   - 正確選擇分類便於管理
   - 可以後續透過篩選快速找到

3. **圖片品質**
   - 建議尺寸：400x400px 以上
   - 檔案大小：建議 < 2MB
   - 清晰度：適合網頁顯示

4. **批次上傳**
   - 一次可以上傳多張
   - 每張都會獨立處理
   - 不用擔心檔名衝突

## 🆘 常見問題

### Q: 可以使用中文檔名嗎？
**A:** 可以！系統完全支援中文、英文、數字等任何字符。

### Q: 如果上傳同名檔案會怎樣？
**A:** 系統會自動生成不同的檔名，不會覆蓋原有檔案。

### Q: 如何找到之前上傳的圖片？
**A:** 使用圖片選擇器的搜尋和分類篩選功能。

### Q: 可以批次刪除嗎？
**A:** 目前支援單張刪除，批次刪除功能規劃中。

### Q: 圖片會壓縮嗎？
**A:** 目前不會自動壓縮，建議上傳前先優化圖片大小。

## 📚 相關文件

- [服務管理使用說明](./README.md)
- [圖片資料夾結構](./frontend/public/images/services/README.md)
- [API文件](./backend/README.md)

---

**最後更新：2025-10-20**  
**版本：v1.0**

