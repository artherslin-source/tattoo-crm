# 更新服務項目顏色價格說明

## 📋 概述

根據價格表，已更新價格計算邏輯以支持固定顏色價格。現在需要運行腳本來更新數據庫中所有服務項目的顏色規格價格。

## 🎯 價格表結構

根據提供的價格表，每個服務項目有4個顏色選項：
- **割線** (Line Work) - 基礎價格
- **黑白** (Black & White) - 完整價格
- **半彩** (Half Color) - 半彩色價格
- **全彩** (Full Color) - 全彩色價格

## 📝 已更新的服務項目

腳本會更新以下19個服務項目的顏色價格：

1. 半胛圖
2. 排胛圖
3. 大腿表面
4. 大腿全包
5. 小腿表面
6. 小腿全包
7. 前手臂
8. 上手臂
9. 大小腿包全肢
10. 上下手臂全肢
11. 單胸到包全手
12. 大背後圖
13. 背後左或右圖
14. 大背到大腿圖
15. 雙胸到腹肚圖
16. 雙前胸口圖
17. 單胸口
18. 腹肚圖
19. 單胸腹肚圖

## 🚀 執行更新腳本

### 方法 1：使用環境變數（推薦）

```bash
# 設置 API 基礎 URL 和訪問令牌
export API_BASE="https://your-backend-url.com"
export ACCESS_TOKEN="your_access_token_here"

# 運行腳本
node update-service-color-prices.js
```

### 方法 2：直接在命令中設置

```bash
API_BASE="https://your-backend-url.com" ACCESS_TOKEN="your_access_token_here" node update-service-color-prices.js
```

### 獲取訪問令牌

1. 登入管理後台
2. 打開瀏覽器開發者工具（F12）
3. 在 Console 中執行：
   ```javascript
   localStorage.getItem('accessToken')
   ```
4. 複製返回的令牌

## 📊 腳本功能

腳本會：
1. 遍歷所有服務項目
2. 查找每個服務項目的顏色規格
3. 如果規格已存在，更新其價格
4. 如果規格不存在，創建新的顏色規格
5. 確保所有服務項目都有4個顏色選項（割線、黑白、半彩、全彩）

## ⚠️ 注意事項

1. **數據保護**：腳本只會更新顏色規格的價格，不會刪除或修改其他數據
2. **向後兼容**：如果顏色規格的 `priceModifier <= 1000`，系統會視為加價（向後兼容）
3. **固定價格**：如果顏色規格的 `priceModifier > 1000`，系統會視為完整固定價格

## 🔍 驗證更新

更新完成後，可以：
1. 在前台選擇服務項目
2. 查看不同顏色選項的價格
3. 確認價格與價格表一致

## 📝 價格計算邏輯

### 新邏輯（固定顏色價格）

如果顏色規格的 `priceModifier > 1000`：
- 價格 = 顏色規格的 `priceModifier`（完整固定價格）

### 舊邏輯（向後兼容）

如果顏色規格的 `priceModifier <= 1000`：
- 價格 = 尺寸價格 + 顏色加價

## 🐛 故障排除

如果遇到問題：

1. **找不到服務項目**
   - 確認服務項目名稱與數據庫中的完全一致
   - 檢查服務項目是否已創建

2. **權限錯誤**
   - 確認 ACCESS_TOKEN 有效
   - 確認令牌有管理員權限

3. **API 連接失敗**
   - 確認 API_BASE URL 正確
   - 確認後端服務正在運行

## ✅ 完成後

更新完成後，所有服務項目的顏色價格都會與價格表一致。用戶在前台選擇顏色時，會看到正確的固定價格。

